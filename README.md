# 🎵 Spotify Crate

一個現代化的個人音樂聆聽分析工具，採用純黑色背景設計和陽光主題色彩，提供豐富的數據可視化和智能分析功能。

## ✨ 功能特色

### 🎵 核心分析功能
- 📊 **專輯分析**: 查看熱門專輯排行、播放次數和聆聽時長統計，含專輯封面顯示
- 📈 **單曲分析**: 深入了解最常播放的歌曲和播放模式
- 👨‍🎤 **藝人分析**: 探索您的音樂偶像、追蹤者數量和人氣指數
- 🎼 **曲風分析**: 了解您的音樂風格偏好分佈
- ⏰ **智能時間分析**: 動態分析不同時段的音樂聆聽習慣，支援多時間視窗切換

### 🎨 視覺設計特色
- **純黑色背景**: 專業簡約的視覺設計，降低視覺疲勞
- **陽光主題配色**: 時間段分析採用從清晨到夜晚的太陽光譜配色
- **專輯封面展示**: 真實的 Spotify 專輯封面，提升視覺體驗
- **響應式設計**: 完美支援桌面和移動設備
- **現代化互動**: 使用 Tailwind CSS 和 Lucide 圖標，支援 hover 效果

### 🔐 技術特色
- **Spotify OAuth 2.0**: 安全的 PKCE 認證流程，無需後端服務
- **本地數據處理**: 數據僅在本地處理，確保隱私安全
- **智能資料增強**: 當資料不足時自動結合多種 API 來源提升分析準確度
- **動態時間視窗**: 支援 7天/30天/180天/365天 多種時間範圍分析
- **智能緩存**: 自動緩存機制，提升載入速度

## 🚀 快速開始

### 開發環境

```bash
# 安裝依賴
npm install

# 啟動 Web 開發服務器 (推薦，port 8000)
npm run dev

# 建置並檢查 TypeScript 錯誤
npm run build

# 預覽生產版本
npm run preview
```

### 使用者設定

1. 啟動應用程式 (`npm run dev`)
2. 前往 **設定** 頁面
3. 點擊「連接 Spotify」進行一鍵 OAuth 認證
4. 授權後即可查看個人音樂分析數據

> **注意**: 現在支援一鍵連接，無需手動設定 Client ID

## 🔧 最新功能亮點

### ⏰ 智能時間分析
- **動態時間視窗**: 根據選擇的時間範圍（7天/30天/180天/365天）動態分析
- **智能資料增強**: 當最近播放記錄不足時，自動結合熱門歌曲資料提升分析準確度
- **合理時間分佈**: 基於真實聆聽習慣模型生成時間段分析
- **陽光主題配色**: 
  - 🌅 清晨陽光 - 溫暖金色 (6:00-12:00)
  - ☀️ 正午陽光 - 明亮黃色 (12:00-18:00)
  - 🌅 夕陽西下 - 橙紅色 (18:00-24:00)
  - 🌙 星月夜空 - 柔和紫藍 (0:00-6:00)

### 📊 專輯分析增強
- **專輯封面展示**: 真實 Spotify 專輯封面，提升視覺體驗
- **互動設計**: Hover 效果顯示播放按鈕
- **排名徽章**: 彩色排名標示，清楚顯示專輯排行
- **純黑色背景**: 統一設計語言，減少視覺干擾

### 🚫 移除 Demo 模式
- **真實資料**: 完全移除假資料，確保分析結果真實可信
- **必須認證**: 需要 Spotify 連接才能使用，保證資料準確性
- **錯誤處理**: 完善的空狀態和錯誤處理機制

## 🛠️ 技術架構

### 前端技術棧
- **React 18** - 現代化前端框架
- **TypeScript** - 類型安全的開發體驗  
- **Vite** - 快速構建工具
- **Tailwind CSS** - 實用優先的 CSS 框架
- **TanStack Query** - 強大的數據獲取和緩存
- **Zustand** - 輕量級狀態管理
- **Recharts** - 響應式圖表庫，支援自定義主題

### 架構特色
- **Web-First 設計**: 主要針對 Web 環境優化
- **無後端架構**: 直接與 Spotify Web API 整合，無需自建後端
- **模組化分析**: 每種分析類型獨立組件，便於維護和擴展
- **智能錯誤處理**: Web/Desktop 雙環境支援，自動處理不同環境的指令

### 必要的 API 權限範圍
- `user-top-read` - 讀取用戶熱門內容
- `user-read-recently-played` - 讀取最近播放記錄  
- `user-read-playback-state` - 讀取播放狀態
- `user-modify-playback-state` - 控制播放
- `user-read-currently-playing` - 讀取當前播放

## 📋 環境設定

建立 `.env` 檔案：

```env
# Spotify API Configuration (主要用於開發)
VITE_SPOTIFY_CLIENT_ID=your_client_id_here
VITE_SPOTIFY_REDIRECT_URI_WEB=http://127.0.0.1:8000/callback
VITE_SPOTIFY_REDIRECT_URI_DESKTOP=http://127.0.0.1:8001/callback
```

> **生產環境**: 應用程式內建預設 Client ID，一般使用者無需設定

## 🔧 建置與分發

```bash
# Web 開發模式 (推薦)
npm run dev

# 生產建置 (Web)
npm run build

# 預覽生產版本
npm run preview

# Legacy: Tauri 桌面應用 (不推薦)
npm run tauri dev
npm run tauri build
```

## 📈 開發最佳實踐

### 程式碼品質
- **TypeScript 嚴格模式**: 所有程式碼使用嚴格的類型檢查
- **陣列安全檢查**: 所有陣列操作都包含 `Array.isArray()` 和 `.length` 檢查
- **避免 `as any`**: 使用正確的 TypeScript 介面定義
- **純黑色背景**: 所有分析組件使用 `bg-black` 保持一致性

### 資料處理
- **真實資料優先**: 完全移除 demo 資料，確保分析準確性
- **智能增強**: 資料不足時自動結合多種 API 來源
- **動態時間視窗**: 支援多種時間範圍的動態分析
- **合理快取**: 5分鐘智能快取，平衡效能與資料新鮮度

## 📄 授權

本專案使用 MIT 授權條款。

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request！

---

Built with ❤️ using Tauri + React